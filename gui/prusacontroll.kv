#:kivy 1.9.0

<PrintMenuClass>:
	Widget:
		id: PrintMenu
		BoxLayout:
			orientation: 'vertical'
			size_hint: sideBar.size_hint
			size: sideBar.size
			pos: sideBar.pos
		Label:
			text: 'Material'
		Button:
			id: printBtn
			text: 'material'
		Label:
			text: 'Quality'
		Button:
			id: qualityBtn
			text: 'quality'


<PrusaControllWidget>:
	BoxLayout:
		orientation: 'vertical'
		size: root.size
		ActionBar:
			id: topBar

			size_hint: (1, .07)
			pos_hint: {'top':1}

			ActionView:
				#icon: 'gui/logo.png'
				use_separator: True
				ActionButton:
					icon: 'gui/shopping.png'
					text: 'shop'
				ActionButton:
					icon: 'gui/help.png'
					text: 'help'
				ActionButton:
					icon: 'gui/settings.png'
					text: 'settings'
					#on_press: app.open_settings()
				ActionPrevious:
					app_icon: 'gui/logo.png'
					title: ''
					with_previous: False
		BoxLayout:
			orientation: 'horizontal'

			RendererBasic:
				size: self.size
				pos: self.pos

			Widget:
				id: sideBar
				size_hint: (topBar.size_hint[1], 1)
				canvas:
					Rectangle:
						source: 'atlas://data/images/defaulttheme/action_bar'
						size: self.size
						pos: self.pos

				BoxLayout:
					id: printMenu
					#tato podminka zajisti ze tento widget nebude na zacatku zobrazen ale instance bude existovat
					on_parent: if self.parent == sideBar: sideBar.remove_widget(printMenu)
					padding: 2
					spacing: 2
					orientation: 'vertical'
					size_hint: sideBar.size_hint
					size: sideBar.size
					pos: sideBar.pos

					Label:
						font_size: '20sp'
						text_size: self.size
						halign: 'left'
						valign: 'middle'
						size_hint: (1, 0.35)
						text: 'Material'
					Spinner:
						size_hint: (1, 0.3)
						value: ('PLA', 'ABS')
						text: 'PLA'
					Label:
						font_size: '20sp'
						text_size: self.size
						halign: 'left'
						valign: 'middle'
						size_hint: (1, 0.35)
						text: 'Quality'
					Spinner:
						size_hint: (1, 0.3)
						value: ('Low 0.4mm', 'Normal 0.2mm', 'High 0.05mm')
						text: 'Normal 0.2mm'
					Label:
						font_size: '20sp'
						text_size: self.size
						halign: 'left'
						valign: 'middle'
						size_hint: (1, 0.35)
						text: 'Infill % ' + str(infillSldr.value)
					Slider:
						id: infillSldr
						size_hint: (1, 0.3)
						step: 20
					BoxLayout:
						padding: 2
						spacing: 2
						orientation: 'horizontal'
						size_hint: (1, 0.3)
						CheckBox:
							id: supportChck
							size_hint: (.25, 1)
						Label:
							text_size: self.size
							halign: 'left'
							valign: 'middle'
							text: 'Support material'
					BoxLayout:
						padding: 2
						spacing: 2
						orientation: 'horizontal'
						size_hint: (1, 0.3)
						CheckBox:
							id: brimChck
							size_hint: (.25, 1)
						Label:
							text_size: self.size
							halign: 'left'
							valign: 'middle'
							text: 'Brim'

					#vyplnovy widget aby mezi nastavenim a tlacitkama byla mezera
					Label:
						text: ''

					BoxLayout:
						id: printMenuSmallLayout
						orientation: 'horizontal'
						padding: 2
						spacing: 2
						size_hint: (1, 0.3)
						Button:
							size_hint: (.6, 1)
							text: 'BACK'
							on_press:
								sideBar.remove_widget(printMenu)
								sideBar.size_hint=(topBar.size_hint[1], 1)
								sideBar.add_widget(normalMenu)
						Label:
							size_hint: (.4, 1)
							text: ''
						Button:
							size_hint: (1, 1)
							text: 'SAVE G-CODE'

				BoxLayout:
					id: normalMenu
					orientation: 'vertical'
					size_hint: sideBar.size_hint
					size: sideBar.size
					pos: sideBar.pos
					padding: 2
					spacing: 2

					ActionToggleButton:
						id: moveBtn
						icon: 'gui/move.png'
						group: 'tools'
						size_hint: (1, 0.3)
						pos_hint: {'top':1}
						#text: 'move'
					ActionToggleButton:
						id: rotateBtn
						icon: 'gui/rotate.png'
						group: 'tools'
						size_hint: (1, 0.3)
						pos_hint: {'top':1}
						#text: 'rotate
					ActionToggleButton:
						id: scaleBtn
						icon: 'gui/resize.png'
						group: 'tools'
						size_hint: (1, 0.3)
						pos_hint: {'top':1}
						#text: 'scale'

					Label:
						text: ''

					BoxLayout:
						id: sideBarSmallLayout
						orientation: 'horizontal'
						ActionButton:
							id: saveBtn
							icon: 'gui/save.png'
							size_hint: (1, 0.2)
							text: 'save'

						ActionButton:
							id: openBtn
							icon: 'gui/open.png'
							size_hint: (1, 0.2)
							text: 'open'

					Button:
						id: printBtn
						pos_hint: {'top':0}
						size_hint: (1, 0.2)
						text: 'PRINT'
						on_press:
							sideBar.remove_widget(normalMenu)
							sideBar.size_hint=(topBar.size_hint[1]*5, 1)
							sideBar.add_widget(printMenu)












